!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.atomico={})}(this,function(e){"use strict";function t(e,t){e.removeChild(t)}function n(e,t){e.appendChild(t)}function s(e,t,...n){return new r(e,t,function e(t,n=[]){for(let s=0;s<t.length;s++){let r=t[s];Array.isArray(r)?e(r,n):n.push(r)}return n}(n))}class r{constructor(e,t,n){this.tag=e,this.props=t||{},this.children=n||[]}clone(e=this.tag,t=this.props,n=this.children){return new r(e,Object.assign({},t),n)}}let i="__PREVIOUS__",o="__LISTENERS__";function l(e){let l=e.tagName.toLowerCase();return e[i]=s(l),c=>{c=function(e){return e instanceof r}(c)&&"host"===c.tag?c.clone(l):s(l,{},c),function e(s,l,c,h,p,u){let d=c&&c[i]||new r,a=c;h&&"function"==typeof h.tag&&(h=h.tag(Object.assign({},h.props,{children:h.children})));h instanceof r||(h=new r("",{},h));if(d.tag!==h.tag)if(a=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):e?document.createElement(e):document.createTextNode("")}(h.tag,p),c){if(""!==h.tag){let e=h.children.length;for(;c.firstChild&&e--;)n(a,c.firstChild)}!function(e,t,n){e.replaceChild(t,n)}(l,a,c)}else n(l,a);if(h.tag)if(function(e,t,n,s){let r=Object.keys(t),i=Object.keys(n),l=r.concat(i),c={};for(let r=0;r<l.length;r++){let i=l[r];if(c[i]||t[i]===n[i])continue;c[i]=!0;let h="function"==typeof t[i],p="function"==typeof n[i];if(h||p)!p&&h&&e.removeEventListener(i,e[o][i][0]),p&&(h||(e[o]=e[o]||{},e[o][i]||(e[o][i]=[t=>{e[o][i][1](t)}]),e.addEventListener(i,e[o][i][0])),e[o][i][1]=n[i]);else if(i in n)if(i in e&&!s||s&&"style"===i)if("style"===i)if("object"==typeof n[i]){let s=t[i]||{},r=n[i];for(let t in r)s[t]!==r[t]&&("-"===t[0]?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else e.style.cssText=n[i];else e[i]=n[i];else s?e.setAttributeNS(null,i,n[i]):e.setAttribute(i,n[i]);else e.removeAttribute(i)}}(a,d.tag===h.tag?d.props:{},h.props,p),"slot"===h.tag){h.props.name}else{let n=u?a:a.shadowRoot||a,r=n.childNodes,i=h.children,o=0,l=Math.max(i.length,r.length);for(let c=0;c<l;c++){let l=c-o;c in i?e(s,n,r[l],i[c],p,u+1):(t(n,r[l]),o++)}}else d.children!==h.children&&(a.textContent=h.children);a[i]=h;return a}(e,e,e,c)}}function c(e){return e.replace(/-+([\w])/g,(e,t)=>t.toUpperCase())}function h(e){let t=Array.isArray(e),n=[],s={};for(let r in e){let i=(t?e[r]:r).replace(/([^\-])([A-Z]+)/,(e,t,n)=>t+"-"+n.toLowerCase());t?n.push(i):(n.push(i),s[i]=e[r],s[c(r)]=e[r])}return{keys:n,types:s}}e.Element=class extends HTMLElement{constructor(){super();let e=l(this);this.props={},this.isMount=!1,this.countRender=0,this.preventRender=!1,this.proxy=h(this.constructor.props),this.rerender=(t=>{this.isMount&&(this.preventRender||(this.preventRender=!0,Promise.resolve().then(()=>{e(this.render()),this.preventRender=!1,this.countRender++?this.onUpdated():this.onMounted()})))}),this.proxy.keys.forEach(e=>{e=c(e),Object.defineProperty(this,e,{set(t){this.setProps({[e]:t})},get(){return this.props[e]}})})}static get props(){return[]}render(){}onMounted(){}onUpdated(){}onUnmounted(){}setProps(e){let t,n={};for(let s in e){let r=this.props[s];if(e[s]!==r){let i=this.proxy.types[s],o=i?i(e[s],r):e[s];o!==r&&(n[s]=o,t=!0)}}t&&(this.props=Object.assign({},this.props,n),this.rerender())}setAttribute(e,t){this.proxy.keys.indexOf(e)>-1?this.setProps({[c(e)]:t}):super.setAttribute(e,t)}static get observedAttributes(){return h(this.props).keys}connectedCallback(){this.isMount=!0,this.rerender()}disconnectedCallback(){this.isMount&&this.onUnmounted()}attributeChangedCallback(e,t,n){this.setProps({[e]:n})}},e.h=s,e.createRender=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=atomico.umd.js.map
